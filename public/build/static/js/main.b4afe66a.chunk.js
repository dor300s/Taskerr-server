(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{117:function(e,t,n){e.exports=n(249)},122:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),l=(n(122),n(32)),i=n(10),u=n(11),s=n(13),m=n(12),p=n(22),h=n(18),d=n(16),y=n(33),f=n.n(y),v={query:function(e){return f.a.get("/api/toy",{params:Object(d.a)({},e)}).then((function(e){return e.data}))},get:function(e){return f.a.get("".concat("/api/toy","/").concat(e)).then((function(e){return e.data}))},remove:function(e){return f.a.delete("".concat("/api/toy","/").concat(e))},save:function(e){var t;t=e._id?f.a.put("".concat("/api/toy","/").concat(e._id),e):f.a.post("/api/toy",e);return t.then((function(e){return e.data}))}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return v.query(e).then((function(e){return t({type:"SET_TOYS",toys:e})}))}}function b(e){return function(t){v.get(e).then((function(e){return t({type:"SET_TOY",toy:e})}))}}var g=n(37),O=n.n(g);function j(e){var t=e.toy;return r.a.createElement("div",{className:"toy-card flex column"},r.a.createElement("h2",null,t.name),r.a.createElement("h2",null,"Price: $",t.price),r.a.createElement("h2",null,"[ ",t.type," ]"),r.a.createElement("h2",null,O()(t.createdAt).format("LL")),r.a.createElement("h2",null,"In stock: ",t.inStock?"Yes":"No"),r.a.createElement("img",{src:t.imgUrl?t.imgUrl[0]:"assets/img/bear.png"}),r.a.createElement(h.b,{to:"/toy/".concat(t._id)},"Details"))}function k(e){var t=e.toys;return r.a.createElement("div",{className:"toys-container flex justify-center"},t.map((function(e){return r.a.createElement(j,{key:e._id,toy:e})})))}var C=n(43),S=n(83),T=n(281),A=n(288),N=n(287),x=n(284),w=n(286),_=Object(T.a)((function(e){return{button:{display:"block",marginTop:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120}}}));function D(e){var t=_(),n=r.a.useState(""),a=Object(S.a)(n,2),o=(a[0],a[1],r.a.useState(!1)),c=Object(S.a)(o,2),l=c[0],i=c[1];return r.a.createElement(x.a,{className:t.formControl},r.a.createElement(A.a,{id:"demo-controlled-open-select-label"},e.label),r.a.createElement(w.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",name:e.name,open:l,onClose:function(){i(!1)},onOpen:function(){i(!0)},value:e.value,onChange:function(t){e.handleChange(t)}},e.options.map((function(e,t){return r.a.createElement(N.a,{key:t,value:e.val},e.name)}))))}var F=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filter:"",name:"",inStock:!1,type:"",sort:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;"inStock"!==a?e.setState(Object(C.a)({},a,r),e.handleFilter):e.setState((function(e){return{inStock:!e.inStock}}),e.handleFilter)},e}return Object(u.a)(n,[{key:"handleFilter",value:function(){var e=this.state,t=e.name,n=e.inStock,a=e.type,r=e.sort;n=n||"",this.props.onFilter({name:t,inStock:n,type:a,sort:r})}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.type,a=e.sort;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"filter-search-box",autoComplete:"off",placeholder:"Search",value:t,name:"name",onChange:this.handleChange}),r.a.createElement("label",null,"In stock:"),r.a.createElement("input",{type:"checkbox",name:"inStock",onChange:this.handleChange}),r.a.createElement(D,{value:n,options:[{val:"",name:"All"},{val:"Adult",name:"Adult"},{val:"Educational",name:"Educational"},{val:"Funny",name:"Funny"}],name:"type",label:"Type",handleChange:this.handleChange}),r.a.createElement(D,{value:a,options:[{val:"",name:"None"},{val:"name",name:"Name"},{val:"price",name:"Price"}],name:"sort",label:"Sort by",handleChange:this.handleChange}))}}]),n}(r.a.Component),I=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filter:""},e.onFilter=function(t){e.setState({filter:t},e.loadToys)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadToys()}},{key:"loadToys",value:function(){this.props.setToys(this.state.filter)}},{key:"render",value:function(){var e=this.props.toys;return r.a.createElement("section",{className:"toy-app-container"},r.a.createElement("div",{className:"add-toy-container flex justify-center"},r.a.createElement(h.b,{className:"edit-btn",to:"/toy/edit"},"Add Toy")),r.a.createElement("div",{className:"filter-container flex justify-center align-center"},r.a.createElement(F,{onFilter:this.onFilter})),e&&r.a.createElement(k,{toys:e}))}}]),n}(r.a.Component),U={setToys:E},P=Object(p.b)((function(e){return{toys:e.toyApp.toys}}),U)(I),L=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"nav-bar flex justify-center align-center"},r.a.createElement(h.c,{to:"/"},"Home"),r.a.createElement(h.c,{to:"/toy"},"Toys"),r.a.createElement(h.c,{to:"/about"},"About"))}}]),n}(r.a.Component),Y=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{className:"welcome-msg"},"Welcome to MisterToy"))}}]),n}(r.a.Component),R=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.setToy(e)}},{key:"onRemove",value:function(e){var t=this;this.props.removeToy(e).then((function(){return t.props.history.push("/toy")}))}},{key:"render",value:function(){var e=this,t=this.props.toy;return t?r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("div",{className:"details-container flex column space-around align-center"},r.a.createElement("h2",null,t.name),r.a.createElement("h2",null,"Price: $",t.price),r.a.createElement("h2",null,O()(t.createdAt).format("LL")),r.a.createElement("h2",null,"In stock: ",t.inStock?"Yes":"No"),t.imgUrl?t.imgUrl.map((function(e,t){return r.a.createElement("img",{key:t,className:"edit-preview-img",src:e})})):r.a.createElement("img",{src:t.imgUrl||"assets/img/bear.png",alt:"No image set yet"}),r.a.createElement("div",null,r.a.createElement("button",{className:"delete-btn",onClick:function(){return e.onRemove(t._id)}},"Delete"),r.a.createElement(h.b,{className:"edit-btn",to:"/toy/edit/".concat(t._id)},"Edit")))):r.a.createElement("h3",null,"Loading...")}}]),n}(r.a.Component),M={setToy:b,removeToy:function(e){return function(t){return v.remove(e).then((function(){return t({type:"REMOVE_TOY",toyId:e})}))}}},B=Object(p.b)((function(e){return{toy:e.toyApp.currToy}}),M)(R),q=n(29);function W(e){var t="https://api.cloudinary.com/v1_1/".concat("dcelvs5jv","/image/upload"),n=Object.values(e.target.files);return Promise.all(n.map((function(e){var n=new FormData;return n.append("file",e),n.append("upload_preset","d3b1nly1"),f.a.post(t,n).then((function(e){return e.data.url})).catch((function(e){return console.log(e)}))}))).then((function(e){return e}))}var G=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={name:"",price:"",inStock:!0,type:"Adult",imgUrl:[],isImgLoading:!1},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;r="number"===t.target.type?parseInt(r):r,"inStock"===a&&(r="true"===r),e.setState(Object(C.a)({},a,r))},e.handleSubmit=function(t){t.preventDefault();var n=e.state;e.props.saveToy(n).then((function(t){e.props.history.push("/toy")}))},e.uploadImg=function(t){e.setState({isImgLoading:!0}),W(t).then((function(t){e.setState((function(e){return{imgUrl:[].concat(Object(q.a)(e.imgUrl),Object(q.a)(t))}})),e.setState({isImgLoading:!1})})).catch((function(){return e.setState({isImgLoading:!1})}))},e.onRemoveImg=function(t,n){t.preventDefault(),e.setState((function(e){return{imgUrl:Object(q.a)(e.imgUrl.filter((function(e,t){if(t!==n)return e})))}}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadToy()}},{key:"componentDidUpdate",value:function(e){e.toy!==this.props.toy&&this.setState(Object(d.a)({},this.props.toy))}},{key:"loadToy",value:function(){var e=this.props.match.params.id;e&&this.props.setToy(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.price,o=t.inStock,c=t.type,l=t.imgUrl,i=t.isImgLoading,u=this.props.match.params.id;return r.a.createElement("div",{className:"edit-container"},r.a.createElement("form",{className:"flex column",onSubmit:this.handleSubmit},r.a.createElement("h2",null,u?"Edit":"Add"),r.a.createElement("input",{type:"text",placeholder:"name",value:n,name:"name",onChange:this.handleChange,required:!0}),r.a.createElement("input",{min:"0",type:"number",placeholder:"price",value:a,name:"price",onChange:this.handleChange,required:!0}),r.a.createElement("label",null,"In stock:",r.a.createElement("select",{value:o,name:"inStock",onChange:this.handleChange},r.a.createElement("option",{value:!0},"Yes"),r.a.createElement("option",{value:!1},"No"))),r.a.createElement("select",{value:c,name:"type",onChange:this.handleChange},r.a.createElement("option",{value:"Adult"},"Adult"),r.a.createElement("option",{value:"Educational"},"Educational"),r.a.createElement("option",{value:"Funny"},"Funny")),r.a.createElement("label",{className:"edit-choose-pic"}," Choose Picture(s)",r.a.createElement("input",{onChange:this.uploadImg,type:"file",multiple:!0,hidden:!0})),i&&r.a.createElement("h3",null,"loading..."),l&&0!==l.length&&r.a.createElement("div",{className:"edit-pic-container flex"},l.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement("button",{onClick:function(t){return e.onRemoveImg(t,n)}},"X"),r.a.createElement("img",{className:"edit-preview-img",src:t}))}))),r.a.createElement("button",null,"Save")))}}]),n}(r.a.Component),V={setToy:b,saveToy:function(e){return function(t){var n=e._id?"UPDATE_TOY":"ADD_TOY";return v.save(e).then((function(e){return t({type:n,toy:e})}))}}},X=Object(p.b)((function(e){return{toy:e.toyApp.currToy}}),V)(G),z=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isExpanded:!1,msg:"",msgs:[{txt:"Hello there!",by:"robot",createdAt:Date.now()}]},e.handleSubmit=function(t){t.preventDefault();var n=e.state.msg;e.setState((function(e){return{msgs:[].concat(Object(q.a)(e.msgs),[{txt:n,by:"user",createdAt:Date.now()}]),msg:""}})),setTimeout((function(){e.setState((function(e){return{msgs:[].concat(Object(q.a)(e.msgs),[{txt:"Sure thing sweetie...",by:"robot",createdAt:Date.now()}])}}))}),1e3)},e.handleChange=function(t){var n=t.target;e.setState({msg:n.value})},e.toggleChat=function(){e.setState((function(e){return{isExpanded:!e.isExpanded}}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isExpanded,n=e.msg,a=e.msgs;return t?r.a.createElement("div",{className:"toy-chat flex column"},r.a.createElement("header",{className:"toy-chat-header"},r.a.createElement("h2",null,"Toy Chat"),r.a.createElement("button",{onClick:this.toggleChat},"X")),r.a.createElement("main",{className:"toy-chat-main"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"user"===e.by?"user-msg":"robot-msg"},r.a.createElement("h5",null,e.txt),r.a.createElement("h6",null,O()(e.createdAt).startOf().fromNow()))}))),r.a.createElement("footer",{className:"toy-chat-footer flex"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"flex"},r.a.createElement("input",{type:"text",value:n,placeholder:"How can i help?",onChange:this.handleChange}),r.a.createElement("button",null,"Send")))):r.a.createElement("div",{className:"toy-chat-icon",onClick:this.toggleChat},"Chat")}}]),n}(r.a.Component),H=n(111),$=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.setToys().then((function(){return e.calcStatistics()}))}},{key:"calcStatistics",value:function(){var e=this.props.toys,t=0,n=0,a=0,r=0,o=0,c=0;e.forEach((function(e){"Adult"===e.type?(t++,r+=e.price):"Educational"===e.type?(n++,o+=e.price):(a++,c+=e.price)})),this.setState({data:[(r/t).toFixed(2),(o/n).toFixed(2),(c/a).toFixed(2)]})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Average Prices per toy type:"),r.a.createElement(H.a,{height:100,data:this.chartData}))}},{key:"chartData",get:function(){return{labels:["Adult","Educational","Funny"],datasets:[{data:this.state.data,backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}}}]),n}(r.a.Component),J={setToys:E},Z=Object(p.b)((function(e){return{toys:e.toyApp.toys}}),J)($),K=n(68),Q=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={places:[{name:"Tel Aviv-Yafo",pos:{lat:32.0804808,lng:34.7805274}},{name:"Rishon LeZion",pos:{lat:31.9635712,lng:34.8101149}},{name:"Ramat Gan",pos:{lat:32.0686867,lng:34.8246812}}],currPos:{lat:32.0804808,lng:34.7805274}},e.containerStyle={position:"relative",width:"100%",height:"500px"},e}return Object(u.a)(n,[{key:"onPlaceClick",value:function(e){this.setState({currPos:e}),console.log(this.state)}},{key:"render",value:function(){var e=this,t=this.state,n=t.places,a=t.currPos;return r.a.createElement("div",null,r.a.createElement("div",{className:"branches-container flex justify-center align-center"},r.a.createElement("h2",null,"Branches:"),r.a.createElement("button",{className:"branch-btn",onClick:function(){return e.onPlaceClick(n[0].pos)}},"Tel Aviv"),r.a.createElement("button",{className:"branch-btn",onClick:function(){return e.onPlaceClick(n[1].pos)}},"Rishon Lezion"),r.a.createElement("button",{className:"branch-btn",onClick:function(){return e.onPlaceClick(n[2].pos)}},"Ramat Gan")),r.a.createElement(K.Map,{containerStyle:this.containerStyle,google:this.props.google,style:{width:"100%",height:"500px"},initialCenter:a,center:a,zoom:14},n.map((function(e,t){return r.a.createElement(K.Marker,{key:t,name:e.name,position:e.pos})}))))}}]),n}(r.a.Component),ee=Object(K.GoogleApiWrapper)({apiKey:"AIzaSyCe7-aDf0TUxFU8VwGrjeQaiqDo56LZ8is"})(Q),te=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,null),r.a.createElement(ee,null))}}]),n}(r.a.Component);var ne=function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(L,null)),r.a.createElement("main",null,r.a.createElement(z,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{component:X,path:"/toy/edit/:id?"}),r.a.createElement(l.a,{component:B,path:"/toy/:id"}),r.a.createElement(l.a,{component:P,path:"/toy"}),r.a.createElement(l.a,{component:te,path:"/about"}),r.a.createElement(l.a,{component:Y,path:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae={toys:[],currToy:null};var re=n(42),oe=n(113),ce=Object(re.c)({toyApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(d.a)(Object(d.a)({},e),{},{toys:t.toys});case"SET_TOY":return Object(d.a)(Object(d.a)({},e),{},{currToy:t.toy});case"ADD_TOY":return Object(d.a)(Object(d.a)({},e),{},{toys:[].concat(Object(q.a)(e.toys),[t.toy])});case"UPDATE_TOY":return Object(d.a)(Object(d.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.toy._id?t.toy:e}))});case"REMOVE_TOY":return Object(d.a)(Object(d.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t.toyId}))});default:return e}}}),le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||re.d,ie=Object(re.e)(ce,le(Object(re.a)(oe.a)));c.a.render(r.a.createElement(p.a,{store:ie},r.a.createElement(h.a,null,r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.b4afe66a.chunk.js.map