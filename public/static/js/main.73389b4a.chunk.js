(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,a){e.exports=a(268)},120:function(e,t,a){},172:function(e,t){},268:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),i=(a(120),a(11)),s=a(2),l=a(3),u=a(5),d=a(4),m=a(20),p=a(7),f=a(8),h=a.n(f),v=a(9),b=a(17),g=Object(b.a)(),E=a(28),C=a.n(E),y=C.a.create({withCredentials:!0}),k=function(e,t){return O(e,"GET",t)},w=function(e,t){return O(e,"POST",t)},N=function(e,t){return O(e,"PUT",t)},B=function(e,t){return O(e,"DELETE",t)};function O(e){return S.apply(this,arguments)}function S(){return(S=Object(v.a)(h.a.mark((function e(t){var a,n,r,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,y({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&g.push("/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var x={login:function(e){return M.apply(this,arguments)},logout:function(){return D.apply(this,arguments)},signup:function(e){return L.apply(this,arguments)},getUsers:function(){return k("user")},getById:function(e){return k("user/".concat(e))},remove:function(e){return B("user/".concat(e))},update:j,getUserFromSession:function(){return U.apply(this,arguments)},clearNotifications:function(e){e.notifications.map((function(e){return e.isRead=!0})),j(e)}};function j(e){return N("user/".concat(e._id),e)}function M(){return(M=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/login",t);case 2:return a=e.sent,e.abrupt("return",A(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",A(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/logout");case 2:return t=e.sent,sessionStorage.clear(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return e.isLogIn=!0,j(e),sessionStorage.setItem("user",JSON.stringify(e)),e}function U(){return(U=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/session");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.login(e);case 2:n=t.sent,a(H(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function T(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getUserFromSession();case 2:a=e.sent,t(H(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function F(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.update(e);case 2:n=t.sent,a(H(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function H(e){return{type:"SET_USER",user:e}}function R(e){return{type:"SET_USERS",users:e}}var _=a(14),P=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:null,password:null},e.inputHandler=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n={username:a.username,password:a.password};e.props.login(n).then((function(){e.props.history.push("/board")})).catch(console.log("ERROR"))},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-container flex column space-between align-center"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"flex column space-between",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"username",name:"username",autoComplete:"off",onChange:this.inputHandler}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:this.inputHandler}),r.a.createElement("button",null,"Login")),r.a.createElement("p",null,"Don't have an account?",r.a.createElement(_.b,{to:"/signup"},"signup")))}}]),a}(r.a.Component),W={login:I},z=Object(p.b)(null,W)(P),$=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fullName:null,password:null,username:null},e.inputHandler=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.fullName,r={password:a.password,fullName:n,username:a.username,isGuest:!1};e.props.signup(r).then((function(){return e.props.history.push("/board")})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"signup-container flex column space-between align-center"},r.a.createElement("h2",null,"Signup"),r.a.createElement("form",{className:"flex column space-between",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Full name",name:"fullName",onChange:this.inputHandler,required:!0}),r.a.createElement("input",{type:"text",placeholder:"username",name:"username",onChange:this.inputHandler,required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:this.inputHandler,required:!0}),r.a.createElement("button",null,"Signup")),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(_.b,{to:"/login"},"login")))}}]),a}(r.a.Component),V={signup:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.signup(e);case 2:n=t.sent,a(H(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},J=Object(p.b)(null,V)($),q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onDemoClick=function(){e.props.login({username:"guest",password:"guest"})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getUser().then((function(){e.props.loggedUser&&e.props.history.push("/board")}))}},{key:"componentDidUpdate",value:function(){this.props.loggedUser&&this.props.history.push("/board")}},{key:"render",value:function(){return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"wallpaper"}),r.a.createElement("div",{className:"home-content-wrapper flex"},r.a.createElement("div",{className:"home-pitch flex column justify-center align-center"},r.a.createElement("h2",{className:"logo"}),r.a.createElement("h3",{className:"line-a"},"Taskerr"),r.a.createElement("h3",{className:"line-b"},"Like Trello,"),r.a.createElement("h3",{className:"line-c"},"Just better."),r.a.createElement("div",{className:"demo-btn flex align-center justify-center",onClick:this.onDemoClick},"Guest mode")),r.a.createElement("div",{className:"home-login-container flex justify-center align-center"},r.a.createElement(i.c,null,r.a.createElement(i.a,{component:J,path:"/signup"}),r.a.createElement(i.a,{component:z,path:"/"})))))}}]),a}(r.a.Component),K={login:I,getUser:T},G=Object(p.b)((function(e){return{loggedUser:e.user.loggedInUser}}),K)(q),X=a(10),Q="/api/board",Y=C.a.create({withCredentials:!0}),Z={query:function(e){return Y.get(Q,{params:Object(X.a)({},e)}).then((function(e){return e.data}))},get:function(e){return Y.get("".concat(Q,"/").concat(e)).then((function(e){return e.data}))},remove:function(e){return Y.delete("".concat(Q,"/").concat(e))},save:function(e){var t;t=e._id?Y.put("".concat(Q,"/").concat(e._id),e):Y.post(Q,e);return t.then((function(e){return e.data}))}};var ee,te=a(109),ae=a.n(te),ne={setup:function(){ee=ae()("/")},terminate:function(){ee=null},on:function(e,t){ee.on(e,t)},off:function(e,t){ee.off(e,t)},emit:function(e,t){ee.emit(e,t)}};function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.query(e);case 3:return n=t.sent,t.abrupt("return",a({type:"SET_BOARDS",boards:n}));case 7:t.prev=7,t.t0=t.catch(0),console.log("boardAction: error in setBoards:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function oe(){return function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t({type:"RESET_BOARD"}));case 4:e.prev=4,e.t0=e.catch(0),console.log("Dont earse currBoard",e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.get(e);case 3:return n=t.sent,t.abrupt("return",a({type:"SET_BOARD",board:n}));case 7:t.prev=7,t.t0=t.catch(0),console.log("boardAction: error in setBoard:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ie(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.remove(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("boardAction: error in removeBoard:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}function se(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e._id?"UPDATE_BOARD":"ADD_BOARD",t.next=4,Z.save(e);case 4:return r=t.sent,ne.emit("board updated",e._id),t.abrupt("return",a({type:n,board:r}));case 9:t.prev=9,t.t0=t.catch(0),console.log("boardAction: error in saveBoard:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}function le(e){var t="https://api.cloudinary.com/v1_1/".concat("dt3cfrjpr","/image/upload"),a=Object.values(e.target.files).map((function(e){var a=new FormData;return a.append("file",e),a.append("upload_preset","rvddiiry"),C.a.post(t,a).then((function(e){return e.data})).then((function(e){return e})).catch((function(e){return console.log(e)}))}));return Promise.all(a)}var ue=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",editTitleMode:!1,isImgLoading:!1,updateCoverMode:!1},e.closeBoardMenu=function(t){var a=e.props.closeMenu;e.node.contains(t.target)&&27!==t.keyCode||a()},e.activeEditMode=function(t){t.stopPropagation(),e.setState({editTitleMode:!0})},e.handleChange=function(t){t.stopPropagation(),e.setState({title:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.saveBoard,r=a.closeMenu,o=a.clearCurrBoard,c=e.props.board;c.title=e.state.title,n(c).then((function(){return o()})),e.setState({editTitleMode:!1}),r()},e.onRemoveBoard=function(t){t.stopPropagation();var a=e.props,n=a.board;(0,a.removeBoard)(n._id)},e.openCoverMode=function(){e.setState({coverMode:!0})},e.closeCoverMode=function(){e.setState({coverMode:!1})},e.onUploadImg=function(t){var a=e.props,n=a.saveBoard,r=a.closeMenu,o=a.clearCurrBoard;e.setState({isImgLoading:!0});var c=e.props.board;le(t).then((function(t){c.background.content=t[0].url,n(c).then((function(){return o()})),e.setState({isImgLoading:!1}),r()})).catch((function(){return e.setState({isImgLoading:!1})}))},e.onChangeColor=function(t){var a=e.props,n=a.saveBoard,r=a.closeMenu,o=a.clearCurrBoard,c=e.props.board;c.background.color=t,c.background.content="",n(c).then((function(){return o()})),r()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.closeBoardMenu,!1),document.addEventListener("keydown",this.closeBoardMenu,!1);var e=this.props.board;this.setState({title:e.title})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.closeBoardMenu,!1),document.removeEventListener("keydown",this.closeBoardMenu,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.editTitleMode,n=t.title,o=t.isImgLoading,c=t.coverMode;return r.a.createElement("div",{ref:function(t){return e.node=t},className:"board-menu-container flex column space-between ".concat(o&&"box-shadow-off")},o?r.a.createElement("div",{className:"loading"}):r.a.createElement(r.a.Fragment,null,a?r.a.createElement("form",{className:"flex",onSubmit:this.handleSubmit},r.a.createElement("input",{value:n,onChange:this.handleChange,onBlur:this.handleSubmit,onClick:function(e){return e.stopPropagation()},autoFocus:!0,spellCheck:"false"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:this.activeEditMode},"Edit Title"),r.a.createElement("div",{className:"update-cover-btn",onClick:function(e){return e.stopPropagation()},onMouseOver:this.openCoverMode,onMouseLeave:this.closeCoverMode},"Update cover",c&&r.a.createElement("div",{className:"change-cover-wrap flex column"},r.a.createElement("div",{className:"color-palette flex"},r.a.createElement("div",{onClick:function(){return e.onChangeColor("#e74c3c")}},"\u2b24"),r.a.createElement("div",{onClick:function(){return e.onChangeColor("#e67e22")}},"\u2b24"),r.a.createElement("div",{onClick:function(){return e.onChangeColor("#f1c40f")}},"\u2b24"),r.a.createElement("div",{onClick:function(){return e.onChangeColor("#27ae60")}},"\u2b24"),r.a.createElement("div",{onClick:function(){return e.onChangeColor("#2980b9")}},"\u2b24"),r.a.createElement("div",{onClick:function(){return e.onChangeColor("#8e44ad")}},"\u2b24")),r.a.createElement("label",null,r.a.createElement("div",{className:"upload-pic-btn"},"Upload Image",r.a.createElement("input",{onChange:this.onUploadImg,type:"file",hidden:!0,accept:"image/png, image/jpeg"}))))),r.a.createElement("div",{className:"delete-btn",onClick:this.onRemoveBoard},"Delete Board"))))}}]),a}(r.a.Component),de={saveBoard:se,removeBoard:ie},me=Object(p.b)(null,de)(ue),pe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1},e.openMenu=function(t){t.stopPropagation(),e.setState({isModalOpen:!0})},e.closeMenu=function(){e.setState({isModalOpen:!1})},e}return Object(l.a)(a,[{key:"getBackground",value:function(e){return e.background.content?{backgroundImage:"url("+"".concat(e.background.content)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:e.background.color}}},{key:"starToggle",value:function(e,t){var a=this.props,n=a.saveBoard,r=a.clearCurrBoard;t.stopPropagation(),e.isStarred=!e.isStarred,n(e).then((function(){return r()}))}},{key:"render",value:function(){var e=this,t=this.state.isModalOpen,a=this.props,n=a.board,o=a.onBoardClicked,c=a.clearCurrBoard,i=a.editable;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"board",onClick:function(){return o(n._id)},style:this.getBackground(n)},r.a.createElement("h3",null,n.title),i&&r.a.createElement("div",{className:"fs24 ".concat(n.isStarred?"starred":"not-starred"),onClick:function(t){return e.starToggle(n,t)}}),i&&r.a.createElement("div",{className:"menu-btn",onClick:this.openMenu}),t&&r.a.createElement(me,{closeMenu:this.closeMenu,board:n,clearCurrBoard:c})))}}]),a}(r.a.Component),fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addBoardForm:!1,newBoardTitle:""},e.escFunction=function(t){27===t.keyCode&&e.setState({addBoardForm:!1,newBoardTitle:""})},e.openForm=function(){e.setState({addBoardForm:!0})},e.handleChange=function(t){var a=t.target.value;e.setState({newBoardTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.createNewBoard()},e.handleBlur=function(){e.state.newBoardTitle?e.createNewBoard():e.setState({addBoardForm:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"createNewBoard",value:function(){var e={title:this.state.newBoardTitle};this.props.saveBoard(e),this.setState({addBoardForm:!1,newBoardTitle:""})}},{key:"render",value:function(){var e=this.props,t=e.boards,a=e.onBoardClicked,n=e.saveBoard,o=e.addBoardOption,c=e.clearCurrBoard,i=e.history,s=e.editable,l=this.state,u=l.addBoardForm,d=l.newBoardTitle;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(pe,{history:i,key:e._id,board:e,onBoardClicked:a,saveBoard:n,clearCurrBoard:c,editable:s})})),o&&r.a.createElement("div",{className:"board add-board flex justify-center align-center",onClick:this.openForm},u?r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Board title...",value:d,onChange:this.handleChange,autoFocus:!0,onBlur:this.handleBlur})):r.a.createElement("h3",null,"Create new board")))}}]),a}(r.a.Component),he=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).inputHandler=function(t){var a=t.target;e.props.onFilter(a.value)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"nav-menu-filter flex justify-center align-center"},r.a.createElement("input",{className:"board-search",autoComplete:"off",type:"text",name:"keyword",placeholder:"Search a board",onChange:this.inputHandler}))}}]),a}(r.a.Component),ve=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filteredBoards:null},e.onCloseMenu=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.props.onCloseMenu()},e.onBoardClicked=function(t){e.props.history.push("/board/".concat(t)),e.props.setBoard(t)},e.onFilter=function(t){if(console.log(t),t.length){var a=e.props.boards.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));e.setState({filteredBoards:a})}else e.setState({filteredBoards:null})},e.onHomeBtnClick=function(){e.props.history.push("/board"),e.props.onCloseMenu()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onCloseMenu,!1),document.addEventListener("keydown",this.onCloseMenu,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onCloseMenu,!1),document.removeEventListener("keydown",this.onCloseMenu,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currBoard,n=t.boards,o=t.isMenuActive,c=this.state.filteredBoards,i=n.filter((function(e){return e.isStarred}));return r.a.createElement("div",{className:"nav-menu flex column ".concat(o?"nav-open":""),ref:function(t){return e.node=t}},a&&r.a.createElement("div",{className:"home-button flex align-center justify-center cursor",onClick:function(){return e.onHomeBtnClick()}},r.a.createElement("div",{className:"dashboard-btn"}),r.a.createElement("div",{className:"flex align-center justify-center"},"Dashboard")),r.a.createElement(he,{onFilter:function(t){return e.onFilter(t)}}),r.a.createElement("div",{className:"nav-boards-preview-wrapper flex column"},r.a.createElement("div",{className:"nav-board-preview-overlay"}),c&&r.a.createElement("h3",{className:"label searched-boards-header"},"Searched Boards"),c&&!c.length&&r.a.createElement("h4",{className:"label no-match"},"- There is no matches"),c&&r.a.createElement("div",{className:"boards-container flex column align-center"},r.a.createElement(fe,{boards:c,onBoardClicked:this.onBoardClicked})),Boolean(n.length)&&r.a.createElement("div",null,Boolean(i.length)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"list-header"},"Starred"),r.a.createElement("div",{className:"boards-container flex column align-center"},r.a.createElement(fe,{boards:i,onBoardClicked:this.onBoardClicked}))," "),r.a.createElement("div",null,r.a.createElement("h3",{className:"list-header"},"All Boards")),r.a.createElement("div",{className:"boards-container flex column align-center"},r.a.createElement(fe,{boards:n,onBoardClicked:this.onBoardClicked})))))}}]),a}(r.a.Component),be={setBoards:re,setBoard:ce},ge=Object(p.b)(null,be)(Object(i.f)(ve));function Ee(e){var t=e.notifications,a=e.history;e.isShown;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"notifications-header flex align-center justify-center"},r.a.createElement("div",{className:"history-back-btn",onClick:function(){return e.goBack()}}),r.a.createElement("h3",null,"History")),r.a.createElement("div",{className:"nav-notifications-wrapper flex column align-center"},t.map((function(e,t){return r.a.createElement("div",{className:"user-notification flex align-center space-between",key:t,onClick:function(t){t.stopPropagation(),a.push("".concat(e.url))}},r.a.createElement("p",null,e.content))}))))}function Ce(e){return r.a.createElement("div",{className:"notifications-all-read flex column align-center"},r.a.createElement("img",{className:"notification-nodata"}),r.a.createElement("h3",null,"All set! No Unread Notifications"),r.a.createElement("span",{className:"notifi-history-btn",onClick:function(){return e.showHistory()}},"View history"))}function ye(e){var t=e.user.notifications.filter((function(e){return!e.isRead}));return r.a.createElement("div",{className:"nav-notifications-wrapper flex column align-center"},r.a.createElement("span",{className:"card-notification-clear",onClick:function(){return e.markAsRead()}}),t.map((function(t,a){return"board-collab"===t.type?r.a.createElement("div",{className:"user-notification flex align-start",key:a},r.a.createElement("p",null,t.data),r.a.createElement("div",{className:"board-collab-btns flex column space-around"},r.a.createElement("button",{onClick:function(){return e.onBoardCollab(t,a)}},"Join"),r.a.createElement("button",{onClick:function(){return e.onInviteDecline(a)}},"Decline"))):"card-assign"===t.type?r.a.createElement("div",{className:"user-notification flex column",key:a},r.a.createElement("p",{className:"card-assign-content"},t.data),r.a.createElement(_.b,{className:"notification-card-link",to:"/board/".concat(t.boardId,"/").concat(t.cardId)},"View Card")):r.a.createElement("div",{className:"user-notification flex align-center space-between",key:a},r.a.createElement("p",null,t.data),r.a.createElement(_.b,{className:"notification-link",to:t.url},"Details"))})))}var ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isHistoryShown:!1},e.onCloseNotificationMenu=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.props.onCloseNotificationMenu()},e.onClearNotification=function(){var t=e.props.loggedUser;x.clearNotifications(t),e.props.update(t)},e.onNotificationsHistory=function(){e.setState((function(e){return{isHistoryShown:!e.isHistoryShown}}))},e.onBoardCollab=function(t,a){var n=e.props.loggedUser;Z.get(t.collabBoardId).then((function(t){var r=t.members.findIndex((function(e){return e._id===n._id}));console.log(r),-1===r?(t.members.push({_id:n._id,imgUrl:n.imgUrl,userName:n.userName,fullName:n.fullName}),n.notifications.splice(a,1),e.props.update(n),e.props.saveBoard(t),e.props.history.push("/board/".concat(t._id))):n.notifications.splice(a,1)}),e.props.onCloseNotificationMenu())},e.onInviteDecline=function(t){var a=e.props.loggedUser;a.notifications.splice(t,1),e.props.update(a)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getUser(),document.addEventListener("mousedown",this.onCloseNotificationMenu,!1),document.addEventListener("keydown",this.onCloseNotificationMenu,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onCloseNotificationMenu,!1),document.removeEventListener("keydown",this.onCloseNotificationMenu,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,n=t.isNotificationModalOpen,o=this.state.isHistoryShown,c=a.notifications.filter((function(e){return!e.isRead}));return r.a.createElement("div",{ref:function(t){return e.node=t}},r.a.createElement("div",{className:"nav-user-notifications-container ".concat(n?"modal-open":""," flex column align-center")},o&&r.a.createElement(Ee,{isShown:n,goBack:this.onNotificationsHistory,notifications:a.notifications,history:this.props.history}),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"notifications-header"},r.a.createElement("h3",null,"Notifications")),c.length?r.a.createElement(ye,{onInviteDecline:this.onInviteDecline,markAsRead:this.onClearNotification,notifications:c,onBoardCollab:this.onBoardCollab,user:a}):r.a.createElement(Ce,{showHistory:this.onNotificationsHistory}))))}}]),a}(n.Component),we={saveBoard:se,getUser:T,update:F,setUser:H},Ne=Object(p.b)((function(e){return{loggedUser:e.user.loggedInUser}}),we)(ke);function Be(e){var t=e.board,a=e.history,n=e.cardMemberMode;return r.a.createElement("div",{className:"nav-board-members flex align-center"},t.members.map((function(e,t){return e.imgUrl?r.a.createElement("div",{key:t,className:"board-member",style:{backgroundImage:"url("+"".concat(e.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(){return a.push("/user/".concat(e._id))}},r.a.createElement("div",{className:"board-member-tooltip"},r.a.createElement("p",null,e.fullName))):r.a.createElement("h3",{className:"nav-user-profile flex justify-center align-center"},e.fullName.charAt(0))})),!n&&r.a.createElement("button",{className:"nav-user-profile invite flex align-center justify-center index-1",onClick:function(){return e.onInvite()}},r.a.createElement("div",{className:"plus-white flex align-center justify-center"})))}var Oe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isUserModalOpen:!1},e.onCloseUserModal=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.setState({isUserModalOpen:!1})},e.onUserClick=function(t){t.stopPropagation(),e.setState((function(e){return{isUserModalOpen:!e.isUserModalOpen}}))},e.onUserLogOut=function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.stopPropagation(),n=e.props.history,t.next=4,x.logout();case 4:n.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onCloseUserModal,!1),document.addEventListener("keydown",this.onCloseUserModal,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onCloseUserModal,!1),document.removeEventListener("keydown",this.onCloseUserModal,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.history,o=this.onUserClick,c=this.onUserLogOut,i=this.state.isUserModalOpen;return r.a.createElement("div",{className:"user-preview",ref:function(t){return e.node=t},onClick:o},a.imgUrl?r.a.createElement("div",{className:"board-member",style:{backgroundImage:"url("+"".concat(a.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}):r.a.createElement("h3",{className:"nav-user-profile flex justify-center align-center"},a.fullName.charAt(0)),r.a.createElement("div",{className:"member-modal ".concat(i?"modal-open":"")},r.a.createElement("div",{onClick:function(){return n.push("/user/".concat(a._id))}}," My details "),r.a.createElement("div",{onClick:function(e){return c(e)}},"Log Out")))}}]),a}(n.Component),Se=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={users:null,searchWord:"",filterLists:[],filterCards:[],isSearchOpenModal:!1},e.loadUsers=function(){},e.onCloseSearchModal=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.setState({isSearchOpenModal:!1})},e.handleChange=function(t){var a=t.target.value;e.setState({searchWord:a},(function(){return e.onSearch()}))},e.onBoardClicked=function(t){e.props.history.push("/board/".concat(t))},e.onSearch=function(){var t=e.state.searchWord,a=e.props,n=a.currBoard,r=a.boards;if(t.length){if(r){var o=r.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));return o.length||(o=r),void e.setState({filterBoards:o})}var c=[];n.cardLists.forEach((function(e){e.title.toLowerCase().includes(t.toLowerCase())&&(e.boardId=n._id,e.boardTitle=n.title,c.push(e))}));var i=[];n.cardLists.forEach((function(e){e.cards.forEach((function(a){a.text.toLowerCase().includes(t.toLowerCase())&&(a.boardId=n._id,a.boardTitle=n.title,a.cardListId=e.id,a.cardListTitle=e.title,i.push(a))}))})),e.setState({filterLists:c,filterCards:i})}else e.setState({filterBoards:[],filterLists:[],filterCards:[],filterUsers:[]})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onCloseSearchModal,!1),document.addEventListener("keydown",this.onCloseSearchModal,!1),this.loadUsers()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onCloseSearchModal,!1),document.removeEventListener("keydown",this.onCloseSearchModal,!1)}},{key:"openSearchModal",value:function(){this.setState({isSearchOpenModal:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchWord,n=t.filterLists,o=t.filterCards,c=t.filterBoards,i=t.isSearchOpenModal,s=this.props,l=s.currBoard,u=s.history;return c&&c.filter((function(e){return e.isStarred})),r.a.createElement("div",{ref:function(t){return e.node=t},className:" nav-search-result-container flex column"},r.a.createElement("input",{onClick:function(){return e.openSearchModal()},autoComplete:"off",onSubmit:function(){return e.onSearch},className:"card-search",type:"text",value:a,name:"keyword",placeholder:"Search",onChange:this.handleChange}),r.a.createElement("div",{className:"nav-search-result ".concat(i?"open-modal":""," flex column")},c&&Boolean(c.length)&&r.a.createElement("div",null,r.a.createElement("h3",{className:"result-header"},"Board result"),r.a.createElement("div",{className:"search-results"},c.map((function(e){return r.a.createElement("div",{className:"result-preview",onClick:function(){return u.push("/board/".concat(e._id))}},r.a.createElement("div",{className:"board-btn"}),r.a.createElement("div",{className:"header"},e.title))})))),!Boolean(n.length)&&!Boolean(o.length)&&r.a.createElement("div",{className:"empty-search-massage"},r.a.createElement("div",{className:"search"}),r.a.createElement("div",null,"Search")),o&&Boolean(o.length)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"result-header"}),r.a.createElement("div",{className:"search-results"},o.map((function(e){return r.a.createElement("div",{className:"result-preview",onClick:function(){return u.push("/board/".concat(l._id,"/").concat(e.id))}},r.a.createElement("div",{className:"card result-icon"}),r.a.createElement("div",{className:"text-result"},r.a.createElement("div",{className:"header"},e.text),r.a.createElement("div",{className:"conjunction"},"in"),r.a.createElement("div",{className:"conjunction"},e.cardListTitle)))}))))))}}]),a}(r.a.Component),xe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filteredUsers:null,isAlreadyInvitesShown:!1},e.onCloseInviteMenu=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.props.onCloseInviteMenu()},e.inputHandler=function(t){var a=t.target;if(a.value){var n=a.value.toLowerCase(),r=e.props.users.filter((function(e){return e.userName.includes(n.toLowerCase())}));e.setState({filteredUsers:r})}else e.setState({filteredUsers:null})},e.onInvite=function(t){if(-1!==e.props.activeBoard.members.findIndex((function(e){return e._id===t})))return e.setState({isAlreadyInvitesShown:!0}),void setTimeout((function(){e.setState({isAlreadyInvitesShown:!1})}),1500);var a={invitedUserId:t,sender:e.props.loggedUser.userName,collabBoardId:e.props.activeBoard._id,createdAt:Date.now()};ne.emit("user invite",a)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.loadUsers(),document.addEventListener("mousedown",this.onCloseInviteMenu,!1),document.addEventListener("keydown",this.onCloseInviteMenu,!1)}},{key:"componentDidUpdate",value:function(e){e.loggedUser!==this.props.loggedUser&&this.props.loadUsers()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onCloseInviteMenu,!1),document.removeEventListener("keydown",this.onCloseInviteMenu,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.filteredUsers,n=t.isAlreadyInvitesShown,o=this.props.isInviteModalOpen;return console.log(o),r.a.createElement("div",{ref:function(t){return e.node=t},className:"invite-members-modal ".concat(o?"modal-open":""," flex column align-center")},r.a.createElement("div",{className:"invite-header"},r.a.createElement("h3",null,"Invite to collaborate")),n&&r.a.createElement("p",null,"User already a member!"),r.a.createElement("input",{type:"text",placeholder:"Enter userName to invite",onKeyUp:this.inputHandler}),a&&r.a.createElement("div",{className:"invite-users-list flex column align-center"},a.map((function(t,a){return r.a.createElement("div",{key:a,className:"user-to-invite flex align-center space-between "},r.a.createElement("span",{className:"nav-user-profile",style:{backgroundImage:"url("+"".concat(t.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}),r.a.createElement("h4",null,t.fullName),r.a.createElement("button",{className:"user-invite-btn",onClick:function(){return e.onInvite(t._id)}},"Invite"),t.isLogIn&&r.a.createElement("div",{className:"user-status flex column align-center"},r.a.createElement("span",{className:"user-online"}),r.a.createElement("h5",null,"Online")),!t.isLogIn&&r.a.createElement("div",{className:"user-status flex column align-center"},r.a.createElement("span",{className:"user-offline"}),r.a.createElement("h5",null,"Offline")))}))))}}]),a}(n.Component),je={loadUsers:function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.getUsers();case 3:a=e.sent,t(R(a)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},Me=Object(p.b)((function(e){return{users:e.user.users,loggedUser:e.user.loggedInUser,activeBoard:e.boardApp.currBoard}}),je)(xe),Le=a(16),De=a.n(Le),Ae=a(29),Ue={labels:["23/5","24/5","25/5","26/5","27/5","28/5","29/5"],datasets:[{label:"Eliyahu Dayan",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:[3,4,1,3,4,5,6]},{label:"Dor Ben Itzhak",backgroundColor:"rgba(111,11,11,0.2)",borderColor:"rgba(111,11,11,1)",borderWidth:1,hoverBackgroundColor:"rgba(111,11,11,0.4)",hoverBorderColor:"rgba(111,11,11,1)",data:[1,2,3,2,1,1,3]},{label:"Reem Alon",backgroundColor:"rgba(222,22,22,0.2)",borderColor:"rgba(222,22,22,1)",borderWidth:1,hoverBackgroundColor:"rgba(222,22,22,0.4)",hoverBorderColor:"rgba(222,22,22,2)",data:[3,2,5,1,6,5,2]}]},Ie=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={usersData:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({usersData:Ue})}},{key:"render",value:function(){var e=this.state.usersData;return r.a.createElement("div",{className:"chart-bar"},r.a.createElement("h2",null,"Bar Example (custom size)"),r.a.createElement(Ae.a,{data:e,width:10,height:5,options:{maintainAspectRatio:!1}}))}}]),a}(n.Component),Te=(Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),{})(Ie),{labels:["Todo","In progress","Done"],datasets:[{data:[300,50,100],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}),Fe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"chart-pay"},r.a.createElement("h2",null,"Pie Example"),r.a.createElement(Ae.c,{data:Te}))}}]),a}(n.Component),He={labels:["23/5","24/5","25/5","26/5","27/5","28/5","29/5"],datasets:[{label:"Todo",fill:!1,lineTension:.1,backgroundColor:"rgba($clrChart8,0.4)",borderColor:"rgba($clrChart8,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba($clrChart8,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba($clrChart8,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[3,2,5,1,6,5,2]},{label:"In progress",fill:!1,lineTension:.1,backgroundColor:"rgba($clrChart7,0.4)",borderColor:"rgba($clrChart7,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba($clrChart7,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba($clrChart7,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[3,4,1,3,4,5,6]},{label:"Done",fill:!1,lineTension:.1,backgroundColor:"rgba($clrChart6,0.4)",borderColor:"rgba($clrChart6,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba($clrChart6,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba($clrChart6, 1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:[1,2,3,2,1,1,3]}]},Re=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"chart-line"},r.a.createElement("h2",null,"Line Example"),r.a.createElement(Ae.b,{data:He}))}}]),a}(n.Component),_e=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isCartModalOpen:!1},e.closeStatisticModal=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.setState({isCartModalOpen:!1})},e.onChartClick=function(){e.setState((function(e){return{isCartModalOpen:!e.isCartModalOpen}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.closeStatisticModal,!1),document.addEventListener("keydown",this.closeStatisticModal,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.closeStatisticModal,!1),document.removeEventListener("keydown",this.closeStatisticModal,!1)}},{key:"render",value:function(){var e=this,t=this.state.isCartModalOpen;return r.a.createElement("div",{className:"chart-container "},r.a.createElement("div",{className:"nav-chart-btn chart",onClick:this.onChartClick}),r.a.createElement("div",{className:"screen  ".concat(t?"modal-open":""," ")},r.a.createElement("div",{ref:function(t){return e.node=t},className:"chart-modal flex wrap"},r.a.createElement(Fe,null),r.a.createElement(Re,null))))}}]),a}(n.Component),Pe={notification:function(){var e=new Audio("https://res.cloudinary.com/dt3cfrjpr/video/upload/v1590757355/messenger_d1vdx5.mp3");e.volume=.15,e.play()}};var We,ze=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuActive:!1,isInviteModalOpen:null,isNotificationModalOpen:!1},e.notifiBoardCollab=function(t){e.props.loggedUser.notifications.unshift({data:"Exciting news! ".concat(t.sender," invited you to collaborate in a board."),createdAt:De()(t.createdAt).fromNow(),collabBoardId:t.collabBoardId,isRead:!1,type:"board-collab"}),e.props.update(e.props.loggedUser),Pe.notification()},e.notifiCardAssign=function(t){e.props.loggedUser.notifications.unshift({data:"Congratz! you have new card assign by ".concat(t.assingedBy,"."),type:"card-assign",isRead:!1,cardId:t.cardId,boardId:t.boardId}),e.props.update(e.props.loggedUser),Pe.notification()},e.onMenuClick=function(){e.setState((function(e){return{isMenuActive:!e.isMenuActive}}))},e.onCloseMenu=function(){e.setState({isMenuActive:!1})},e.onCloseInviteMenu=function(){e.setState({isInviteModalOpen:!1})},e.onCloseNotificationMenu=function(){e.setState({isNotificationModalOpen:!1})},e.onUserNotificationClick=function(){e.setState((function(e){return{isNotificationModalOpen:!e.isNotificationModalOpen}}))},e.onInviteMember=function(){e.setState((function(e){return{isInviteModalOpen:!e.isInviteModalOpen}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;ne.setup(),this.props.getUser().then((function(){e.props.loggedUser&&(ne.on("user-invite-".concat(e.props.loggedUser._id),(function(t){e.notifiBoardCollab(t)})),ne.on("user-card-assign-".concat(e.props.loggedUser._id),(function(t){e.notifiCardAssign(t)}))),e.props.loggedUser?e.props.setBoards():e.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.isMenuActive,o=a.isNotificationModalOpen,c=a.isInviteModalOpen,i=this.props,s=i.boards,l=i.activeBoard,u=i.history,d=i.loggedUser,p=this.onCloseInviteMenu,f=this.onInviteMember,h=this.onCloseNotificationMenu;return d&&(e=d.notifications.filter((function(e){return!e.isRead}))),d?r.a.createElement("nav",{className:"nav-bar flex align-center space-between"},!l&&r.a.createElement("div",{className:"img-wrapper",onClick:function(){return t.props.history.push("/board")}},r.a.createElement("img",{className:"logo",width:"60px",alt:""})),r.a.createElement("div",{className:"nav-left-section flex align-center"},l&&r.a.createElement("div",{className:"board-button flex align-center justiry-center space-between cursor",onClick:this.onMenuClick},r.a.createElement("div",{style:{marginRight:"5px"},className:"board-btn"}),r.a.createElement("div",{className:"board-txt"},"Boards")),l&&r.a.createElement(Be,{onInvite:f,history:u,board:l}),l&&r.a.createElement(Me,{isInviteModalOpen:c,onCloseInviteMenu:p})),r.a.createElement(Se,Object(m.a)({history:u,currBoard:l},"history",u)),r.a.createElement(ge,{history:u,isMenuActive:n,boards:s,currBoard:l,onCloseMenu:this.onCloseMenu}),r.a.createElement("div",{className:"nav-right-section flex align-center"},l&&r.a.createElement(_e,null),r.a.createElement("span",{style:{backgroundColor:"".concat(e.length?"rgb(252, 115, 126)":""," ")},className:"nav-notification-btn",onClick:this.onUserNotificationClick}),r.a.createElement(Ne,{onCloseNotificationMenu:h,isNotificationModalOpen:o,history:u,user:d}),r.a.createElement(Oe,{user:d,history:u}))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),$e={setBoards:re,setBoard:ce,getUser:T,update:F},Ve=Object(p.b)((function(e){return{loggedUser:e.user.loggedInUser,boards:e.boardApp.boards,activeBoard:e.boardApp.currBoard}}),$e)(Object(i.f)(ze)),Je=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props.match.params.userId;x.getById(a).then((function(a){(e=a)?t.setState({user:e}):t.props.history.push("/")}))}},{key:"render",value:function(){var e=this.state.user;return e?r.a.createElement("div",{className:"user-profile-container flex column"},r.a.createElement("h2",null,e.fullName,"'s Profile"),r.a.createElement("div",null),r.a.createElement("img",{className:"user-img",src:e.imgUrl}),r.a.createElement("p",null,"User Name: ",e.userName),r.a.createElement("p",null,"About:",e.about)):r.a.createElement("h3",null,"Loading...")}}]),a}(r.a.Component),qe={update:F},Ke=Object(p.b)((function(e){return{}}),qe)(Je),Ge=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onBoardClicked=function(t){e.props.history.push("/board/".concat(t))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.setBoards(),this.props.getUser()}},{key:"render",value:function(){var e=this.props,t=e.boards,a=e.saveBoard,n=e.clearCurrBoard,o=t.filter((function(e){return e.isStarred}));return r.a.createElement("div",{className:"dashboard"},r.a.createElement("section",{className:"boards-main-container"},Boolean(o.length)&&r.a.createElement("h3",{className:"starred-title"},"Starred"),r.a.createElement("div",{className:"boards-container flex"},r.a.createElement(fe,{boards:o,onBoardClicked:this.onBoardClicked,saveBoard:a,clearCurrBoard:n,editable:!0}))),r.a.createElement("section",{className:"boards-main-container"},r.a.createElement("h3",{className:"all-board-title"},"All Boards"),r.a.createElement("div",{className:"boards-container flex"},r.a.createElement(fe,{boards:t,onBoardClicked:this.onBoardClicked,saveBoard:a,clearCurrBoard:n,addBoardOption:!0,editable:!0}))))}}]),a}(r.a.Component),Xe={setBoards:re,saveBoard:se,clearCurrBoard:oe,setUser:H,getUser:T,update:F},Qe=Object(p.b)((function(e){return{boards:e.boardApp.boards,loggedUser:e.user.loggedInUser}}),Xe)(Ge),Ye=a(69);function Ze(e){return r.a.createElement("div",{className:"card-details-actions flex column align-center"},r.a.createElement("h4",null,"ADD TO CARD"),r.a.createElement("span",{className:"card-action-wrapper flex align-center",onClick:e.onLabels},r.a.createElement("span",{className:"label "}," "),r.a.createElement("h5",{className:"action-title "},"Lables")),r.a.createElement("span",{className:"card-action-wrapper flex align-center",onClick:e.onImages},r.a.createElement("span",{className:"attachments "}," "),r.a.createElement("h5",{className:"action-title "},"Images")),r.a.createElement("span",{className:"card-action-wrapper flex align-center"},r.a.createElement("span",{className:"list "}," "),r.a.createElement("h5",{className:"action-title "},"Todos")),r.a.createElement("span",{className:"card-action-wrapper flex align-center",onClick:function(){return e.openDatePicker()}},r.a.createElement("span",{className:"clock "}," "),r.a.createElement("h5",{className:"action-title "},"Due Date")))}function et(e){var t=e.card,a=(e.board,e.user);return r.a.createElement("div",{className:"card-msgs-container"},t.comments.map((function(t,n){return r.a.createElement("div",{key:n,className:"card-comment-wrapper flex align-start",style:{marginLeft:"44px",width:"370px"}},a.imgUrl&&r.a.createElement("div",{className:"user-profile-comment",style:{backgroundImage:"url("+"".concat(t.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat",minWidth:"30px"}}),!a.imgUrl&&r.a.createElement("h3",{style:{marginLeft:"0px",marginRight:"15px",width:"30px",height:"30px"},className:"card-user-profile flex justify-center align-center"},a.fullName.charAt(0)),r.a.createElement("div",{style:{width:"100%",marginBottom:"10px"},className:"flex column align-start"},r.a.createElement("p",{className:"card-msg-txt"},t.txt," "),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("p",{className:"card-msg-time"},De()(t.createdAt).fromNow()," "),r.a.createElement("button",{className:"card-msg-delete",onClick:function(){return e.deleteComment(n)}},"Delete"))))})))}var tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userMsg:"",isTypeActive:!1},e.onUserType=function(t){var a=t.target,n=e.props.card.id;e.setState({userMsg:a.value}),clearInterval(We),ne.emit("user typing",{id:n,status:!0}),We=setTimeout((function(){ne.emit("user typing",{id:n,status:!1})}),550)},e.onSubmit=function(t){t.preventDefault();var a=e.props,n=a.card,r=a.board,o=a.user,c=e.state.userMsg;if(c){var i={userName:o.userName,txt:c,imgUrl:o.imgUrl,createdAt:Date.now()};n.comments.unshift(i),e.props.saveBoard(r).then((function(){return ne.emit("board updated",r._id)})),e.setState({userMsg:""})}},e.deleteComment=function(t){var a=e.props,n=a.card,r=a.board;n.comments.splice(t,1),e.props.saveBoard(r)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.card.id;ne.on("user-type-".concat(t),(function(t){console.log("Get Focus Status from server"),e.setState({isTypeActive:t})}))}},{key:"componentWillUnmount",value:function(){var e=this.props.card.id;ne.off("user-type-".concat(e))}},{key:"render",value:function(){var e=this.props,t=e.currUser,a=e.card,n=e.board,o=this.state,c=o.userMsg,i=o.isTypeActive;return t?r.a.createElement("div",{className:"card-comments"},r.a.createElement("div",{className:"flex align-center",style:{marginBottom:"15px"}},r.a.createElement("span",{className:"comment"}),r.a.createElement("h4",null,"Comments")),r.a.createElement("div",{className:"card-add-comment flex align-center",style:{marginLeft:"40px",marginBottom:"15px"}},t.imgUrl&&r.a.createElement("div",{className:"self-profile-comment",style:{backgroundImage:"url("+"".concat(t.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}}),!t.imgUrl&&r.a.createElement("h3",{style:{marginLeft:"0px",marginRight:"15px"},className:"card-user-profile flex justify-center align-center"},t.fullName.charAt(0)),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{className:"user-text-input",type:"text",placeholder:t.userName+", whats on your mind?",onChange:this.onUserType,value:c})),i&&r.a.createElement("span",{className:"pulse"})),r.a.createElement(et,{card:a,user:t,board:n,deleteComment:this.deleteComment})):""}}]),a}(n.Component),at={saveBoard:se},nt=Object(p.b)((function(e){return{currUser:e.user.loggedInUser}}),at)(tt),rt=a(114),ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isEditMode:!1,description:"",dynamicClass:""},e.onDescClicked=function(){e.setState({isEditMode:!0})},e.onTextAreaLeave=function(){var t=e.props,a=t.card,n=t.board;e.setState({isEditMode:!1,dynamicClass:""},(function(){a.description=e.state.description,e.props.saveBoard(n)}))},e.onTextFocus=function(){e.setState({dynamicClass:"text-area"})},e.onDescEdit=function(t){var a=t.target;e.setState({description:a.value})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.card;e.board;this.setState({description:t.description})}},{key:"moveCaretAtEnd",value:function(e){var t=e.target.value;e.target.value="",e.target.value=t}},{key:"render",value:function(){var e,t=this.props.card,a=this.state,n=a.isEditMode,o=a.description,c=a.dynamicClass;return r.a.createElement("div",{className:"card-details-description"},r.a.createElement("div",{className:"flex "},r.a.createElement("span",{className:"text"}),r.a.createElement("h4",null,"Description")),!n&&r.a.createElement("p",{onClick:this.onDescClicked},t.description||"Add some details about this board"),n&&r.a.createElement(rt.a,(e={className:c,onFocus:this.onTextFocus,onBlur:this.onTextAreaLeave,type:"text",autoFocus:!0,value:o,placeholder:"Add more details about this card...",onChange:this.onDescEdit},Object(m.a)(e,"onFocus",this.moveCaretAtEnd),Object(m.a)(e,"spellCheck",!1),e)))}}]),a}(n.Component),ct={saveBoard:se},it=Object(p.b)(null,ct)(ot);function st(e){var t=e.board,a=e.card,n=e.opacity;return r.a.createElement("div",{className:"add-card-member-modal ".concat(n," flex align-center")},r.a.createElement("div",{className:"nav-board-members flex align-center"},t.members.map((function(t,n){var o="";0===n&&(o="first-member");var c=a.members.findIndex((function(e){return e._id===t._id}));return t.imgUrl?r.a.createElement("div",{key:n,className:"flex column align-center"},-1!==c&&r.a.createElement("div",{style:{marginLeft:"".concat(n?"-2px":"")},className:"member-overlay"}," "),r.a.createElement("div",{className:o+" board-member",style:{backgroundImage:"url("+"".concat(t.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(){return e.addMember(t)}},r.a.createElement("div",{className:"board-member-tooltip"},r.a.createElement("p",null,t.fullName)))):r.a.createElement("h3",{onClick:function(){return e.addMember(t)},className:"card-user-profile flex justify-center align-center"},t.fullName.charAt(0))}))))}var lt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isAddMemberActive:!1,isMouseHoverUser:!1},e.onAddMember=function(){e.setState((function(e){return{isAddMemberActive:!e.isAddMemberActive}}))},e.addMember=function(t){var a=e.props,n=a.card,r=a.board,o=a.user;if(console.log(n.id,r._id),-1===n.members.findIndex((function(e){return e._id===t._id}))){n.members.push(t),e.props.saveBoard(r),e.props.setBoard(r._id);var c={assignedUserId:t._id,assingedBy:o.userName,cardId:n.id,boardId:r._id};ne.emit("user card assign",c)}},e.onMouseEnter=function(){e.setState({isMouseHoverUser:!0})},e.onMouseLeave=function(){e.setState({isMouseHoverUser:!1})},e.onRemoveCardUser=function(t,a){a.stopPropagation();var n=e.props,r=n.card,o=n.board;r.members.splice(t,1),e.props.saveBoard(o)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.history,o=t.board,c=t.showModal,i=this.state,s=i.isAddMemberActive,l=i.isMouseHoverUser;return r.a.createElement("div",{style:{marginBottom:"30px",marginLeft:"42px"},className:"flex column"},r.a.createElement("h4",{className:"card-members-header"},"Card members"),r.a.createElement("div",{className:"card-members flex align-center"},r.a.createElement(st,{opacity:s||c?"opacity-one":"",card:a,board:o,history:n,addMember:this.addMember}),r.a.createElement("button",{className:"card-member-invite '}",onClick:this.onAddMember,style:{backgroundColor:"".concat(s?"rgba(110, 253, 141, 0.432)":"rgba(142, 176, 248, 0.267)")}},s?"Done":"+Add"),a.members.map((function(t,a){return t.imgUrl?r.a.createElement("div",{key:a,className:"profile-tooltip-wraper"},r.a.createElement("div",{className:"card-member",style:{backgroundImage:"url("+"".concat(t.imgUrl)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},onClick:function(){return n.push("/user/".concat(t._id))},onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},l&&r.a.createElement("button",{onClick:function(t){return e.onRemoveCardUser(a,t)},className:"card-member-remove"})),r.a.createElement("div",{className:"card-member-tooltip"},r.a.createElement("p",null,t.fullName))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"card-user-profile flex justify-center align-center",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}," ",t.fullName.charAt(0)),l&&r.a.createElement("button",{onClick:function(t){return e.onRemoveCardUser(a,t)},className:"card-member-remove"}),r.a.createElement("div",{className:"card-member-tooltip"},r.a.createElement("p",null,t.fullName)))}))))}}]),a}(n.Component),ut={saveBoard:se,setBoard:ce},dt=Object(p.b)(null,ut)(lt),mt=a(112),pt=(a(265),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={date:new Date,timeStamp:""},e.onChange=function(t){return e.setState({date:t},e.formatDate)},e.formatDate=function(){var t=e.state.date.getTime();e.setState({timeStamp:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.timeStamp,a=this.props.isShown;return r.a.createElement("div",{className:"card-calendar-container ".concat(a?"calendar-fade":"")},r.a.createElement(mt.a,{onChange:this.onChange,value:this.state.date,minDate:new Date}),t&&r.a.createElement("div",{className:"flex justify-center",style:{backgroundColor:"rgba(0, 0, 0, 0.253)"}},r.a.createElement("button",{className:"date-confirm",onClick:function(){return e.props.onDatePicked(t)}},"Confirm")))}}]),a}(n.Component)),ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isComplete:!1,diffDays:null,timeStamp:null},e.onComplete=function(){var t=e.props.board;e.setState((function(e){return{isComplete:!e.isComplete}}),(function(){return console.log(e.state.isComplete)})),e.props.saveBoard(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getDiffDays()}},{key:"componentDidUpdate",value:function(){var e=this.props.card;this.state.timeStamp!==e.dueDate&&this.getDiffDays()}},{key:"getDiffDays",value:function(){var e=this.props.card,t=Math.ceil((e.dueDate-Date.now())/864e5);this.setState({diffDays:t,timeStamp:e.dueDate})}},{key:"render",value:function(){var e=this.props.card,t=this.state,a=t.isComplete,n=t.diffDays;return r.a.createElement("div",{className:"card-due-date-container"},r.a.createElement("div",{className:"flex "},r.a.createElement("span",{className:"due-date"}),r.a.createElement("h4",null,"Due Date")),r.a.createElement("div",{style:{marginLeft:"42.5px",marginTop:"18px"},className:"flex align-center"},r.a.createElement("span",{className:a?"due-date-checkbox-complete":"due-date-checkbox",onClick:this.onComplete}," "),r.a.createElement("p",null,De()(e.dueDate).format("MMM Do")),a&&r.a.createElement("p",{className:"due-date-complete flex align-center"},"Complete"),!a&&r.a.createElement("p",{className:"flex align-center",style:{backgroundColor:"".concat(n>=4?"#F9A602":"#EC6B59"),marginLeft:"5px",fontWeight:"600",color:"white"}},r.a.createElement("span",{className:"dueDate"}),n," Days Left")))}}]),a}(r.a.Component),ht={saveBoard:se},vt=Object(p.b)(null,ht)(ft);var bt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,activeImg:""},e.onUpload=function(t){var a=e.props,n=a.board,r=a.card;e.setState({isLoading:!0});var o=[];le(t).then((function(t){t.forEach((function(e){var t={fileName:e.original_filename,format:e.format,url:e.url};o.push(t)})),o.map((function(t){r.attachments.unshift(t),e.props.saveBoard(n).then(e.setState({isLoading:!1}))}))}))},e.onDelete=function(t){var a=e.props,n=a.card,r=a.board;n.attachments.splice(t,1),e.props.saveBoard(r)},e.onImgClick=function(t){e.setState({activeImg:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.loggedUser,o=this.state,c=o.isLoading,i=(o.activeImg,a.attachments);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-details-attachments"},r.a.createElement("div",{className:"flex "},r.a.createElement("span",{className:"photo"}),r.a.createElement("h4",{className:"attachments-header"},"Images")),r.a.createElement("label",{style:{marginLeft:"42px"}}," Add",r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg",onChange:this.onUpload,hidden:!0,multiple:!0})),r.a.createElement("div",{style:{marginTop:"15px",marginLeft:"42px"},className:"attachments-files-container flex align-center space-between"},i&&i.map((function(t,a){return r.a.createElement("div",{key:a,style:{marginBottom:"15px"},className:"flex column",onClick:function(){return e.onImgClick(t.url)}},t.url&&r.a.createElement("img",{src:t.url,width:"150"}),r.a.createElement("div",{className:"attachment-file-name-wrapper flex align-center space-between"},r.a.createElement("p",{className:"attachment-owner"},"Upload by - ",n.userName),r.a.createElement("button",{className:"attachment-delete-btn",onClick:function(){return e.onDelete(a)}},"Delete")))}))),c&&r.a.createElement("span",{style:{marginLeft:"55px"},className:"loading"})))}}]),a}(n.Component),gt={saveBoard:se},Et=Object(p.b)((function(e){return{activeBoard:e.boardApp.currBoard,loggedUser:e.user.loggedInUser}}),gt)(bt),Ct=(n.Component,function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isAddModalShown:!1,newTodoVal:"",isListFiltered:!1,openTodos:null,completedTodos:null,barFillWidth:null,toggleMode:"Hide"},e.getBarWidth=function(){var t=e.props,a=t.card,n=t.board,r=e.state,o=r.openTodos,c=r.completedTodos,i=o.length+c.length,s=c.length/i*100;e.setState({barFillWidth:s},(function(){a.todosBarWidth=s,e.props.saveBoard(n)}))},e.getTodosStatus=function(){var t=e.props,a=t.card,n=(t.board,a.checkList.filter((function(e){return!e.isDone}))),r=a.checkList.filter((function(e){return e.isDone}));e.setState({openTodos:n,completedTodos:r},(function(){e.getBarWidth()}))},e.onComplete=function(t){var a=e.props,n=(a.board,a.user);t.isDone=!t.isDone,t.doneBy={id:n._id,userName:n.userName,fullName:n.fullName},e.getTodosStatus()},e.onAddTodo=function(){e.setState((function(e){return{isAddModalShown:!e.isAddModalShown}}))},e.onHideComplete=function(){var t="";t="Hide"===e.state.toggleMode?"Show":"Hide",e.setState((function(e){return{isListFiltered:!e.isListFiltered,toggleMode:t}}))},e.inputHandler=function(t){var a=t.target;e.setState({newTodoVal:a.value})},e.onSubmit=function(t){t.preventDefault();var a=e.props,n=a.card,r=a.board,o=a.user,c={content:e.state.newTodoVal,creator:o.userName,isDone:!1,createdAt:Date.now()};n.checkList.unshift(c),e.props.saveBoard(r),e.setState({isAddModalShown:!1,newTodoVal:""}),e.getTodosStatus()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getTodosStatus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=(t.board,t.user,this.state),o=(n.barFillWidth,n.toggleMode),c=this.state,i=c.newTodoVal,s=c.isAddModalShown,l=c.isListFiltered,u=c.openTodos,d=c.completedTodos,m=[];return m=l?a.checkList.filter((function(e){return!e.isDone})):a.checkList,u?r.a.createElement("div",{className:"card-details-description"},r.a.createElement("div",{className:"flex align-center",style:{marginBottom:"10px"}},r.a.createElement("span",{className:"list"}),r.a.createElement("h4",null,"Todos"),r.a.createElement("button",{className:"todos-hide-complete-btn",onClick:this.onHideComplete},"".concat(o," (").concat(d.length,") complete items"))),r.a.createElement("div",{className:"todos-bar-wrapper"},r.a.createElement("span",{className:"todos-bar-fill",style:{width:"".concat(a.todosBarWidth,"%")}})),r.a.createElement("div",{style:{marginBottom:"15px"},className:"todo-add-wrapper flex align-center"},r.a.createElement("button",{className:"todo-add-btn",style:{marginLeft:"40px",padding:"0px"},onClick:this.onAddTodo},"+ item"),s&&r.a.createElement("div",{className:"screen",onClick:function(){return e.setState({isAddModalShown:!1})}},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{className:"todos-input",value:i,type:"text",style:{marginLeft:"20px"},onChange:this.inputHandler,autoFocus:!0,placeholder:"Add an item"})))),r.a.createElement("div",{className:"todos-container",style:{marginLeft:"40px",width:"320px"}},m.map((function(t,a){return r.a.createElement("div",{key:a,className:"flex align-center space-between"},r.a.createElement("div",{className:"todo-item flex align-center space-between"},r.a.createElement("div",{className:t.isDone?"todo-complete":"flex column"},r.a.createElement("h3",null,t.content),r.a.createElement("todoinfo",{className:"todo-info"},"Added by ",r.a.createElement("tagcolor",null,t.creator)," at ",r.a.createElement("tagcolor",null,De()(t.createdAt).fromNow()))),r.a.createElement("span",{className:t.isDone?"todo-checkbox-complete":"todo-checkbox",onClick:function(){return e.onComplete(t)}})))})))):"loading"}}]),a}(n.Component)),yt={saveBoard:se},kt=Object(p.b)(null,yt)(Ct),wt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",isErrorShown:!1},e.onLabelClick=function(t){var a=e.props,n=a.card,r=a.board;if(-1!==n.labels.findIndex((function(e){return e.color===t})))return e.setState({isErrorShown:!0}),void setTimeout((function(){e.setState({isErrorShown:!1})}),1500);var o={title:e.state.title,color:t};n.labels.push(o),e.props.saveBoard(r)},e.inputHandler=function(t){var a=t.target;e.setState({title:a.value})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.title,t.isErrorShown);return r.a.createElement("div",{className:"card-labels-modal flex column align-center"},r.a.createElement("h3",{className:"labels-header"},"Labels"),a&&r.a.createElement("h5",null,"This label already exist"),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#61BD4F"}},r.a.createElement("input",{placeholder:"Opt. Add label titles",onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#61BD4F")}},"Set")),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#F2D600"}},r.a.createElement("input",{onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#F2D600")}},"Set")),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#FF9F1A"}},r.a.createElement("input",{onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#FF9F1A")}},"Set")),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#EB5A46"}},r.a.createElement("input",{onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#EB5A46")}},"Set")),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#0079BF"}},r.a.createElement("input",{onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#0079BF")}},"Set")),r.a.createElement("div",{style:{marginBottom:"10px"},className:"flex space-between align-center"},r.a.createElement("div",{className:"card-label flex justify-center align-center",style:{width:"80%",height:"30px",backgroundColor:"#FF78CB"}},r.a.createElement("input",{onChange:this.inputHandler})),r.a.createElement("button",{className:"label-del-btn",onClick:function(){return e.onLabelClick("#FF78CB")}},"Set")))}}]),a}(n.Component),Nt={saveBoard:se},Bt=Object(p.b)(null,Nt)(wt),Ot=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isDeleteBtnShow:!1},e.onKeyUp=function(t,a){var n=e.props,r=n.card;n.board,n.isShown;r.labels[t].title=a.target.innerText},e.onBlur=function(){var t=e.props.board;e.props.saveBoard(t)},e.onEnter=function(){e.setState({isDeleteBtnShow:!0})},e.onLeave=function(){e.setState({isDeleteBtnShow:!1})},e.onRemovelabel=function(t){var a=e.props,n=a.card,r=a.board;n.labels.splice(t,1),e.props.saveBoard(r)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=(t.board,t.isShown),o=this.state.isDeleteBtnShow;return r.a.createElement("div",{className:"card-details-labels-container flex align-center"},a.labels.map((function(t,a){return r.a.createElement("div",{onMouseEnter:e.onEnter,onMouseLeave:e.onLeave,key:a,style:{backgroundColor:"".concat(t.color),minWidth:"50px",minHeight:"15px",marginRight:"10px",borderRadius:"5px",marginTop:"10px",padding:"2px",color:"white",fontSize:"12px",textAlign:"center",position:"relative"}},r.a.createElement("h4",{onBlur:e.onBlur,contentEditable:!0,suppressContentEditableWarning:!0,spellCheck:!1,onKeyUp:function(t){return e.onKeyUp(a,t)}},t.title),o&&r.a.createElement("button",{onClick:function(){return e.onRemovelabel(a)},className:"lable-remove"}))})),n&&r.a.createElement(Bt,{card:this.props.card,board:this.props.board}))}}]),a}(n.Component),St={saveBoard:se},xt=Object(p.b)(null,St)(Ot),jt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currCard:null,currList:null,isCalendarActive:!1,isImagesShown:!1,isMembersModalShown:!1,isLabelsModalShown:!1},e.eventsHandler=function(e){e.stopPropagation()},e.getCurrCard=function(){var t,a,n=e.props,r=n.cardId;n.currBoard.cardLists.forEach((function(e){e.cards.forEach((function(n){n.id===r&&(t=n,a=e)}))})),e.setState({currCard:t,currList:a},(function(){t.attachments.length?e.setState({isImagesShown:!0}):t.attachments.length||e.setState({isImagesShown:!1})}))},e.openDatePicker=function(){e.setState((function(e){return{isCalendarActive:!e.isCalendarActive}}))},e.onImages=function(){e.setState((function(e){return{isImagesShown:!e.isImagesShown}}))},e.onMembers=function(){e.setState((function(e){return{isMembersModalShown:!e.isMembersModalShown}}))},e.onDatePicked=function(t){console.log("OPEN CALENDAR");var a=e.state.currCard,n=e.props.currBoard;a.dueDate=t,e.setState({isCalendarActive:!1}),e.props.saveBoard(n)},e.onCloseCardDetails=function(){var t=e.props.currBoard;e.props.history.push("/board/".concat(t._id))},e.onCardTitle=function(t){var a=t.target;e.state.currCard.text=a.innerText},e.onTitleBlur=function(){console.log("LUREDED");var t=e.props.currBoard;e.props.saveBoard(t)},e.onLabels=function(){e.setState((function(e){return{isLabelsModalShown:!e.isLabelsModalShown}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCurrCard()}},{key:"componentDidUpdate",value:function(e){this.props!==e&&this.getCurrCard()}},{key:"render",value:function(){var e=this.state,t=e.currCard,a=e.currList,n=e.isCalendarActive,o=e.isImagesShown,c=e.isMembersModalShown,i=e.isLabelsModalShown,s=this.props,l=s.currBoard,u=s.loggedUser;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen flex align-center justify-center",onClick:this.onCloseCardDetails}," "),r.a.createElement("div",{className:"card-details-content-wrapper"},r.a.createElement("div",{onClick:this.eventsHandler,className:"card-details-modal"},r.a.createElement("div",{className:"card-details-header flex space-between align-center"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("span",{className:"card-icon"}),r.a.createElement("p",{spellCheck:!1,contentEditable:!0,suppressContentEditableWarning:!0,className:"card-details-title",onBlur:this.onTitleBlur,onKeyUp:this.onCardTitle},t.text),r.a.createElement("p",{className:"card-list-parent"},"In list: ",r.a.createElement("span",null,a.title))),r.a.createElement("span",{className:"cancel",onClick:this.onCloseCardDetails})),r.a.createElement("div",{className:"card-details-content-wrapper flex"},r.a.createElement("div",{className:"card-details-content flex column"},r.a.createElement(xt,{card:t,board:l,isShown:i}),r.a.createElement(dt,{user:u,history:this.props.history,card:t,board:l,showModal:c}),t.dueDate&&r.a.createElement(vt,{card:t,board:l}),r.a.createElement(it,{card:t,board:l}),r.a.createElement(kt,{card:t,board:l,user:this.props.loggedUser}),o&&r.a.createElement(Et,{card:t,board:l}),r.a.createElement(nt,{card:t,board:l,user:this.props.loggedUser})),r.a.createElement(Ze,{onLabels:this.onLabels,openDatePicker:this.openDatePicker,onImages:this.onImages,onMembers:this.onMembers}),r.a.createElement(pt,{card:t,onDatePicked:this.onDatePicked,isShown:n}))))):""}}]),a}(n.Component),Mt={saveBoard:se},Lt=Object(p.b)((function(e){return{loggedUser:e.user.loggedInUser}}),Mt)(jt),Dt=a(24);function At(e){var t=e.icon,a=e.num,n=e.color,o=e.isDone;return r.a.createElement("div",{className:"icon flex space-between"},r.a.createElement("div",{className:t}),r.a.createElement("div",{style:{color:n}},(o||0===o)&&o+"/",a))}function Ut(e){var t,a,n=e.card,o=e.history;return n?r.a.createElement("div",{className:"wrap-icons"},r.a.createElement("div",{className:"card-icons flex space-between align-center"},n.dueDate&&r.a.createElement(At,{color:(a=n.dueDate,a-Date.now()<=864e5?"#e74c3c":a-Date.now()<=3456e5?"#e67e22":"#2ecc71"),icon:"clock-blue",num:function(e){return Math.floor((e-Date.now())/864e5)<0?"Today":Math.ceil((e-Date.now())/864e5)<=1?"Tomorrow":Math.floor((e-Date.now())/864e5)<7?De()(e).format("dddd"):De()(e).format("MMM DD")}(n.dueDate)}),r.a.createElement("div",{className:"items-wrap flex"},Boolean(n.comments.length)&&r.a.createElement(At,{icon:"conversation-blue",num:n.comments.length}),Boolean(n.checkList.length)&&r.a.createElement(At,{icon:"checklist-blue",num:n.checkList.length,isDone:(t=n.checkList,t.reduce((function(e,t){return t.isDone?e+1:e}),0))}))),r.a.createElement("div",{className:"members-placeholder"},Boolean(n.members.length)&&r.a.createElement(Be,{history:o,board:n,cardMemberMode:!0}))):"loading"}function It(e){var t=e.labels;return r.a.createElement("div",{className:"card-labels flex"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"card-label-style",style:{background:e.color}})})))}var Tt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cardTitle:e.props.cardHeader},e.closeCardMenu=function(t){27===t.keyCode&&e.props.closeMenu()},e.activeEditMode=function(t){t.stopPropagation(),e.setState({editTitleMode:!0})},e.handleChange=function(t){t.stopPropagation(),e.setState({title:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=e.props.card;a.title=e.state.title,e.props.saveCard(a),e.setState({editTitleMode:!1}),e.props.closeMenu()},e.onSubmit=function(){e.props.offEditCardHeader(e.props.cardId,e.props.cardListId,e.state.cardTitle)},e.escFunction=function(t){13===t.keyCode&&e.onSubmit()},e.handleChange=function(t){var a=t.target.value;e.setState({cardTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.onSubmit()},e.handleBlur=function(){e.onSubmit()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.closeCardMenu,!1),document.addEventListener("keydown",this.closeCardMenu,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.closeCardMenu,!1),document.removeEventListener("keydown",this.closeCardMenu,!1)}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"moveCaretAtEnd",value:function(e){var t=e.target.value;e.target.value="",e.target.value=t}},{key:"render",value:function(){var e=this.state.cardTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("textarea",{placeholder:"Edit title",onClick:function(e){return e.stopPropagation()},value:e,onChange:this.handleChange,autoFocus:!0,onFocus:this.moveCaretAtEnd,onBlur:this.handleBlur,spellCheck:"false"})))}}]),a}(n.Component),Ft=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuOpen:!1},e.closeBoardMenu=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.setState({isMenuOpen:!1})},e.openMenu=function(t){t.stopPropagation(),e.setState({isMenuOpen:!0})},e.onDeleteCard=function(t,a,n){n.stopPropagation();var r=e.props.currBoard,o=r.cardLists.find((function(e){return e.id===a})),c=o.cards.findIndex((function(e){return e.id===t}));o.cards.splice(c,1),e.props.saveBoard(r)},e.onCloseMenu=function(t){e.setState({isMenuOpen:!1}),e.props.onEditCardHeader(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.closeBoardMenu,!1),document.addEventListener("keydown",this.closeBoardMenu,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.closeBoardMenu,!1),document.removeEventListener("keydown",this.closeBoardMenu,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.onEditCardHeader,t.cardId),n=t.cardListId,o=this.onDeleteCard,c=this.state.isMenuOpen;return r.a.createElement("div",{ref:function(t){return e.node=t},className:"card-menu-container"},r.a.createElement("div",{className:"menu-btn hidden",onClick:function(t){return e.openMenu(t)}}),c&&r.a.createElement("div",{className:"menu-options card-menu"},r.a.createElement("div",{onClick:function(t){return e.onCloseMenu(t)}},"Edit Title"),r.a.createElement("div",{onClick:function(e){return o(a,n,e)}},"Delete Card")))}}]),a}(n.Component),Ht={saveBoard:se},Rt=Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),Ht)(Ft),_t=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isFocus:!1},e.onEditCardHeader=function(t){t.stopPropagation(),e.setState({isFocus:!0})},e.offEditCardHeader=function(t,a,n){if(t&&a){var r=JSON.parse(JSON.stringify(e.props.currBoard));r.cardLists.find((function(e){return e.id===a})).cards.find((function(e){return e.id===t})).text=n,e.setState({isFocus:!1}),e.props.saveBoard(r)}else e.setState({isFocus:!1})},e.showCard=function(e,t,a){t.push("/board/".concat(a._id,"/").concat(e))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.card,o=t.currBoard,c=t.cardListId,i=t.history,s=t.animation,l=this.showCard,u=this.offEditCardHeader,d=this.onEditCardHeader;return r.a.createElement(Dt.b,{key:n.id,draggableId:n.id,index:a},(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:"card-preview drag flex column ".concat(a.isDragging?"isDragging":""," ").concat(s),onClick:function(){return l(n.id,i,o)},ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:Object(X.a)({userSelect:"none"},t.draggableProps.style)}),r.a.createElement(Rt,{cardId:n.id,onEditCardHeader:d,cardListId:c}),Boolean(n.attachments.length)&&r.a.createElement("img",{src:n.attachments[0].url,alt:""}),Boolean(n.labels.length)&&r.a.createElement(It,{histoy:i,labels:n.labels}),e.state.isFocus?r.a.createElement(Tt,{cardHeader:n.text,cardListId:c,cardId:n.id,offEditCardHeader:u}):r.a.createElement("div",{className:"card-text"},n.text),r.a.createElement(Ut,{card:n})))}))}}]),a}(n.Component),Pt={saveBoard:se},Wt=Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),Pt)(_t),zt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addCardForm:!1,newCardTitle:""},e.escFunction=function(t){27===t.keyCode&&e.setState({addCardForm:!1,newCardTitle:""})},e.openForm=function(){e.setState({addCardForm:!0})},e.handleChange=function(t){var a=t.target.value;e.setState({newCardTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.createNewCard()},e.handleBlur=function(){e.state.newCardTitle?e.createNewCard():e.setState({addCardForm:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"createNewCard",value:function(){var e={title:this.state.newCardTitle}.title;console.log("creatNewCard",e),this.props.onAddCard(this.props.cardListId,e),this.setState({addCardForm:!1,newCardTitle:""})}},{key:"render",value:function(){var e=this.state,t=e.addCardForm,a=e.newCardTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-preview flex justify-center align-center",onClick:this.openForm},t?r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Add card",value:a,onChange:this.handleChange,autoFocus:!0,onBlur:this.handleBlur})):r.a.createElement("div",null,"Add card")))}}]),a}(n.Component),$t=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuOpen:!1},e.closeBoardMenu=function(t){t.stopPropagation(),e.node.contains(t.target)&&27!==t.keyCode||e.setState({isMenuOpen:!1})},e.openMenu=function(t){t.stopPropagation(),e.setState({isMenuOpen:!0})},e.onDeleteList=function(t,a){a.stopPropagation();var n=e.props.currBoard,r=n.cardLists,o=r.findIndex((function(e){return t===e.id}));r.splice(o,1),e.props.saveBoard(n)},e.onCloseMenu=function(t){e.setState({isMenuOpen:!1}),e.props.onEditListTitle(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.closeBoardMenu,!1),document.addEventListener("keydown",this.closeBoardMenu,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.closeBoardMenu,!1),document.removeEventListener("keydown",this.closeBoardMenu,!1)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.onEditListTitle,t.cardListId),n=this.onDeleteList,o=this.state.isMenuOpen;return r.a.createElement("div",{ref:function(t){return e.node=t},className:"list-menu-container"},r.a.createElement("div",{className:"menu-btn",onClick:function(t){return e.openMenu(t)}}),o&&r.a.createElement("div",{className:"menu-options list-menu "},r.a.createElement("div",{onClick:function(t){return e.onCloseMenu(t)}},"Edit Title"),r.a.createElement("div",{onClick:function(e){return n(a,e)}},"Delete List")))}}]),a}(n.Component),Vt={saveBoard:se},Jt=Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),Vt)($t),qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cardListTitle:e.props.cardList.title},e.handleChange=function(t){t.stopPropagation(),e.setState({cardListTitle:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.card.title=e.state.title,e.setState({editTitleMode:!1}),e.onSubmit()},e.onSubmit=function(){e.props.offEditListTitle(e.props.cardList.id,e.state.cardListTitle)},e.escFunction=function(t){27===t.keyCode&&e.onSubmit()},e.handleChange=function(t){var a=t.target.value;e.setState({cardListTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.onSubmit()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.escFunction,!1),document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.escFunction,!1),document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state.cardListTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Edit title...",value:e,onChange:this.handleChange,autoFocus:!0,onBlur:this.onSubmit})))}}]),a}(n.Component),Kt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addlistForm:!1,newlistTitle:"",isFocus:!1},e.onEditListTitle=function(t){t.stopPropagation(),e.setState({isFocus:!0})},e.offEditListTitle=function(t,a){if(t){var n=e.props.currBoard;n.cardLists.find((function(e){return e.id===t})).title=a,e.props.saveBoard(n),e.setState({isFocus:!1})}else e.setState({isFocus:!1})},e.escFunction=function(t){27===t.keyCode&&e.setState({addlistForm:!1,newlistTitle:""})},e.openForm=function(){e.setState({addlistForm:!0})},e.handleChange=function(t){var a=t.target.value;e.setState({newlistTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.createNewlist()},e.handleBlur=function(){e.state.newlistTitle?e.createNewlist():e.setState({addlistForm:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"createNewlist",value:function(){var e={title:this.state.newlistTitle};this.props.onAddList(e),this.setState({addlistForm:!1,newlistTitle:""})}},{key:"render",value:function(){var e=this,t=this.props,a=t.cardList,n=t.index,o=t.onAddCard,c=t.currBoard,i=t.history,s=t.animation,l=this.onEditListTitle,u=this.offEditListTitle;return r.a.createElement(Dt.b,{key:a.id,draggableId:a.id,index:n},(function(t,n){return r.a.createElement("div",Object.assign({className:"wrap-card-list flex ".concat(s),key:a.id,ref:t.innerRef},t.draggableProps,t.dragHandleProps),r.a.createElement(Dt.c,{droppableId:a.id,key:a.id,type:"card"},(function(t,n){return r.a.createElement("div",{className:"card-list-container flex column ".concat(n.isDraggingOver?"light":"")},r.a.createElement("div",{className:"title-content flex space-between "},e.state.isFocus?r.a.createElement(qt,{listTitle:a.title,cardList:a,offEditListTitle:u}):r.a.createElement("h2",{className:"list-title"},a.title),r.a.createElement(Jt,{onEditListTitle:l,cardListId:a.id})),r.a.createElement("div",Object.assign({className:"card-list"},t.droppableprops,{ref:t.innerRef}),a.cards.map((function(e,t){return r.a.createElement(Wt,{key:e.id,cardListId:a.id,currBoard:c,card:e,index:t,history:i,animation:s})})),t.placeholder),r.a.createElement(zt,{onAddCard:o,cardList:a,cardListId:a.id}))})))}))}}]),a}(n.Component),Gt={saveBoard:se},Xt=Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),Gt)(Kt),Qt=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={addlistForm:!1,newlistTitle:""},e.escFunction=function(t){27===t.keyCode&&e.setState({addlistForm:!1,newlistTitle:""})},e.openForm=function(){e.setState({addlistForm:!0})},e.handleChange=function(t){var a=t.target.value;e.setState({newlistTitle:a})},e.handleSubmit=function(t){t.preventDefault(),e.createNewlist()},e.handleBlur=function(){e.state.newlistTitle?e.createNewlist():e.setState({addlistForm:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"createNewlist",value:function(){this.state.newlistTitle;this.props.onAddList(this.state.newlistTitle),this.setState({addlistForm:!1,newlistTitle:""})}},{key:"render",value:function(){var e=this.state,t=e.addlistForm,a=e.newlistTitle;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"add-list",onClick:this.openForm},t?r.a.createElement("div",{className:"screen"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Add list ...",value:a,onChange:this.handleChange,autoFocus:!0,onBlur:this.handleBlur}))):r.a.createElement("div",{className:"add-list-btn flex justify-center align-center"},r.a.createElement("div",{className:"plus-white"}))))}}]),a}(n.Component),Yt=a(68),Zt=a.n(Yt),ea=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={animation:"animation"},e.getNewCard=function(e){return{id:Zt()(),createdAt:Date.now(),creator:{},description:"",isStarred:!1,dueDate:null,members:[],covers:{id:"",imgUrl:"",isShown:!0},attachments:[],text:e,checkList:[],labels:[],comments:[]}},e.getNewList=function(e){return{id:Zt()(),title:e,createdAt:Date.now(),creator:null,cards:[]}},e.onAddList=Object(v.a)(h.a.mark((function t(){var a,n,r=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:"",e.setState({animation:"animation"}),n=e.props.currBoard,n.cardLists.push(e.getNewList(a)),t.next=7,e.props.saveBoard(n);case 7:window.scrollTo(1e5,0);case 8:case"end":return t.stop()}}),t)}))),e.onAddCard=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,o,c,i=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",e.setState({animation:"animation"}),console.log("listId",a),console.log("txt",n),r=e.props.currBoard,o=r.cardLists,c=o.find((function(e){return e.id===a})),console.log("list",c),c.cards.push(e.getNewCard(n)),console.log(r),t.next=12,e.props.saveBoard(r);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragEnd=function(t){if(e.setState({animation:""}),t.destination){var a=e.props.currBoard,n=a.cardLists,r=t.source,o=t.destination;switch(t.type){case"card":var c=n.find((function(e){return r.droppableId===e.id})),i=n.find((function(e){return o.droppableId===e.id})),s=c.cards,l=i.cards,u=s.splice(r.index,1),d=Object(Ye.a)(u,1)[0];l.splice(o.index,0,d),e.props.saveBoard(a);break;case"list":var m=n.splice(r.index,1),p=Object(Ye.a)(m,1)[0];n.splice(o.index,0,p),e.props.saveBoard(a)}}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.boardId;this.props.setBoard(t),ne.on("board-updated-".concat(t),(function(t){e.setState({animation:"animation"}),e.props.setBoard(t)}))}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.boardId;ne.off("board-updated-".concat(e)),this.props.clearCurrBoard()}},{key:"getBackground",value:function(e){return e.background.content?{backgroundImage:"url("+"".concat(e.background.content)+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:e.background.color}}},{key:"render",value:function(){var e=this.onDragEnd,t=this.onAddList,a=this.onAddCard,n=this.props,o=n.currBoard,c=n.history,i=this.state.animation,s=this.props.match.params.cardId;if(!o)return r.a.createElement("div",null,"loading");var l=o.cardLists;return r.a.createElement("div",{className:"board-app-container"},r.a.createElement("div",{className:"board-background",style:this.getBackground(o)}),r.a.createElement("div",{className:"wrap-card-lists flex"},r.a.createElement(Dt.a,{onDragEnd:function(t){return e(t)}},r.a.createElement(Dt.c,{droppableId:"all-lists",direction:"horizontal",type:"list"},(function(e,t){return r.a.createElement("div",Object.assign({className:"card-lists flex ".concat(t.isDraggingOver?"light":"")},e.droppableProps,{ref:e.innerRef}),l.map((function(e,t){return r.a.createElement(Xt,{currBoard:o,onAddCard:a,key:e.id,cardList:e,index:t,history:c,animation:i})})),e.placeholder)}))),r.a.createElement(Qt,{onAddList:t})),s&&r.a.createElement(Lt,{currBoard:o,history:c,cardId:s}))}}]),a}(n.Component),ta={setBoards:re,setBoard:ce,clearCurrBoard:oe,removeBoard:ie,saveBoard:se},aa=Object(p.b)((function(e){return{currBoard:e.boardApp.currBoard}}),ta)(ea);var na=function(){return r.a.createElement("div",null,r.a.createElement(Ve,null),r.a.createElement("main",{className:"app-main-container"},r.a.createElement(i.c,null,r.a.createElement(i.a,{component:aa,path:"/board/:boardId/:cardId?"}),r.a.createElement(i.a,{component:Ke,path:"/user/:userId"}),r.a.createElement(i.a,{component:Qe,path:"/board"}),r.a.createElement(i.a,{component:G,path:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ra=a(113),oa={boards:[],currBoard:null};var ca={users:[],loggedInUser:null};var ia=a(19),sa=a(111),la=Object(ia.c)({boardApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(X.a)(Object(X.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(X.a)(Object(X.a)({},e),{},{currBoard:t.board});case"RESET_BOARD":return Object(X.a)(Object(X.a)({},e),{},{currBoard:null});case"ADD_BOARD":return Object(X.a)(Object(X.a)({},e),{},{boards:[].concat(Object(ra.a)(e.boards),[t.board])});case"UPDATE_BOARD":return Object(X.a)(Object(X.a)({},e),{},{currBoard:t.board,boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(X.a)(Object(X.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USERS":return Object(X.a)(Object(X.a)({},e),{},{users:t.users});case"SET_USER":return Object(X.a)(Object(X.a)({},e),{},{loggedInUser:t.user});case"USER_REMOVE":return Object(X.a)(Object(X.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});default:return e}}}),ua=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ia.d,da=Object(ia.e)(la,ua(Object(ia.a)(sa.a)));c.a.render(r.a.createElement(p.a,{store:da},r.a.createElement(_.a,null,r.a.createElement(na,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.73389b4a.chunk.js.map